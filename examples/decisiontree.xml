<?xml version="1.0" encoding="UTF-8" standalone="no"?><beast beautitemplate='Standard' beautistatus='' namespace="beast.core:beast.evolution.alignment:beast.evolution.tree.coalescent:beast.core.util:beast.evolution.nuc:beast.evolution.operators:beast.evolution.sitemodel:beast.evolution.substitutionmodel:beast.evolution.likelihood" required="" version="2.6">



    
<map name="Uniform" >beast.math.distributions.Uniform</map>
<map name="Exponential" >beast.math.distributions.Exponential</map>
<map name="LogNormal" >beast.math.distributions.LogNormalDistributionModel</map>
<map name="Normal" >beast.math.distributions.Normal</map>
<map name="Beta" >beast.math.distributions.Beta</map>
<map name="Gamma" >beast.math.distributions.Gamma</map>
<map name="LaplaceDistribution" >beast.math.distributions.LaplaceDistribution</map>
<map name="prior" >beast.math.distributions.Prior</map>
<map name="InverseGamma" >beast.math.distributions.InverseGamma</map>
<map name="OneOnX" >beast.math.distributions.OneOnX</map>


<!--<run id="mcmc" spec="MCMC" chainLength="100000000">-->
<run id="mcmc" spec="beast.coupledMCMC.CoupledMCMC" chainLength="10000000" chains="4" resampleEvery="10000" heatLikelihoodOnly="false">

    <state id="state" spec="State" storeEvery="5000">

        <tree id="tree" spec="poetry.decisiontree.DecisionTree" name="stateNode">
        </tree>

        <parameter id="Slope" spec="parameter.RealParameter" name="stateNode">10</parameter>
        <parameter id="Intercept" spec="parameter.RealParameter" name="stateNode">10</parameter>
        <parameter id="Sigma" spec="parameter.RealParameter" name="stateNode">10</parameter>

        <parameter id="AttributePointer" spec="parameter.IntegerParameter" name="stateNode">0</parameter>
        <parameter id="SplitPoint" spec="parameter.RealParameter" name="stateNode">0.5</parameter>

        

    </state>

    

    <distribution id="posterior" spec="util.CompoundDistribution">
        <distribution id="prior" spec="util.CompoundDistribution">

            <prior id="slopePrior" name="distribution" x="@Slope">
                <Normal name="distr" mean="0" sigma="10" />
            </prior>

            <prior id="interceptPrior" name="distribution" x="@Intercept">
                <Normal name="distr" mean="0" sigma="10" />
            </prior>

            <prior id="sigmaPrior" name="distribution" x="@Sigma">
                <LogNormal name="distr" meanInRealSpace="true" M="1" S="2" />
            </prior>


            <!--
            <prior id="treePrior" spec="poetry.decisiontree.GeometricTreePrior" name="distribution" tree="@tree">
        		<parameter spec="parameter.RealParameter" name="mean">10</parameter>
            </prior>
            -->

        </distribution>

        <distribution id="likelihood" spec="util.CompoundDistribution">

            <distribution id="decisionTreeDistribution" spec="poetry.decisiontree.DecisionTreeDistribution" tree="@tree" maxLeafCount="10"
            	data="/home/jdou557/Documents/weka-3-8-4-azul-zulu-linux/weka-3-8-4/data/cpu.with.vendor.arff" pred="CACH" class="class"
            	>

            	<!--   -->
            	<!-- data="/home/jdou557/Documents/Marsden2019/papers/PoetryPaper/results/weka.arff" pred="SiteModelPOEM.weight" class="SiteModelPOEM.min.ESS.m"  -->
                
            	<pointer idref="AttributePointer" />
            	<split idref="SplitPoint" />
            	<intercept idref="Intercept" />
            	<slope idref="Slope" />
            	<sigma idref="Sigma" />

            	<parameter spec="parameter.RealParameter" name="shape">2</parameter>
            	

            </distribution>
        </distribution>
    </distribution>


    <!-- Linear regression -->
     <operator allowNonsense="true" beta="0.05" burnin="500" id="regression.AVMVN" initial="1000" spec="AdaptableVarianceMultivariateNormalOperator" weight="2">
        <transformations spec="beast.util.Transform$LogTransform">
            <f idref="Sigma"/>
        </transformations>
        <transformations spec="beast.util.Transform$LogitTransform">
            <f idref="SplitPoint"/>
        </transformations>
        <transformations spec="beast.util.Transform$NoTransform">
            <f idref="Slope"/>
            <f idref="Intercept"/>
        </transformations>
    </operator>


	<!-- Splits -->
    <operator id="pointerSwapper" spec="SwapOperator" intparameter="@AttributePointer" weight="1"/>
    <operator id="splitSwapper" spec="SwapOperator" parameter="@SplitPoint" weight="1"/>
    <operator id="pointerRandomWalk" spec="UniformOperator" parameter="@AttributePointer" weight="1"/>
    <operator id="splitPointUniform" spec="UniformOperator" parameter="@SplitPoint" weight="1"/>

    
    <operator id="SplitNodeOperator" spec="poetry.decisiontree.SplitNodeOperator" tree="@tree" dist="@decisionTreeDistribution" weight="5">
    	<slope idref="Slope" />
    	<intercept idref="Intercept" />
		<pointer idref="AttributePointer" />
    	<split idref="SplitPoint" />
    </operator>


    <operator id="Reroot" spec="poetry.decisiontree.Reroot" tree="@tree" dist="@decisionTreeDistribution" weight="5">
		<slope idref="Slope" />
    	<intercept idref="Intercept" />
		<pointer idref="AttributePointer" />
    	<split idref="SplitPoint" />
    </operator>


    <operator id="DecisionWideExchange" spec="poetry.decisiontree.DecisionExchange" tree="@tree" dist="@decisionTreeDistribution" weight="5" wide="true">
		<slope idref="Slope" />
    	<intercept idref="Intercept" />
		<pointer idref="AttributePointer" />
    	<split idref="SplitPoint" />
    </operator>


    <operator id="DecisionNarrowExchange" spec="poetry.decisiontree.DecisionExchange" tree="@tree" dist="@decisionTreeDistribution" weight="5" wide="false">
		<slope idref="Slope" />
    	<intercept idref="Intercept" />
		<pointer idref="AttributePointer" />
    	<split idref="SplitPoint" />
    </operator>



	<operator id="ChildSwapper" spec="poetry.decisiontree.ChildSwapper" tree="@tree"  weight="2"/>


    <logger id="tracelog" spec="Logger" fileName="decisions.log" logEvery="1000" model="@posterior" sanitiseHeaders="true" sort="smart">
        <log idref="posterior"/>
        <log idref="likelihood"/>
        <log idref="prior"/>
        <log idref="Intercept"/>
        <log idref="Slope"/>
        <log idref="Sigma"/>
        <log idref="AttributePointer"/>
        <log idref="SplitPoint"/>
        <log idref="RegressionLogger" />
        <log idref="LeafCountLogger" />

        
    </logger>

    <logger id="screenlog" spec="Logger" logEvery="1000">
        <log idref="posterior"/>
        <log idref="likelihood"/>
        <log idref="prior"/>
        <log id="RegressionLogger" spec="poetry.decisiontree.RegressionLogger" dist="@decisionTreeDistribution" />
        <log id="LeafCountLogger" spec="poetry.decisiontree.LeafCountLogger" tree="@tree" />
    </logger>


    
    <logger id="DecisionTreeLogger" spec="Logger" fileName="decision.trees" logEvery="1000" mode="tree">
        <log id="DecisionTreeLog" spec="poetry.decisiontree.DecisionTreeLogger" tree="@tree" dist="@decisionTreeDistribution"/>
    </logger>


</run>

</beast>
